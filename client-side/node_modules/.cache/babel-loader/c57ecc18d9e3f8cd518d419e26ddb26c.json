{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\shahar\\\\Desktop\\\\webS\\\\MyProjacts\\\\ChatPet\\\\client-side\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import axios from'axios';import{setAlert}from'./alertAct';import{CLEAR_PROFILE,GET_PROFILE,GET_PROFILES,PROFILE_ERROR,ACCOUNT_DELETED}from'./consts';//create or updite profile\nexport var createProfile=function createProfile(FormData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return function _callee(dispatch){var config,res,errors;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;config={headers:{'Content-Type':'application/json'}};_context.next=4;return _regeneratorRuntime.awrap(axios.post('http://localhost:5000/api/profile/me',FormData,config));case 4:res=_context.sent;dispatch({type:GET_PROFILE,data:res.data});dispatch(setAlert(edit?'Profile Updated':'Profile Created','success'));if(!edit){history.push('/profiles/profilePicture');}history.push('/dashboard');_context.next=16;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);errors=_context.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,data:{msg:_context.t0.response.statusText,status:_context.t0.response.status}});case 16:case\"end\":return _context.stop();}}},null,null,[[0,11]]);};};//get user profile\nexport var getUserProfile=function getUserProfile(){return function _callee2(dispatch){var res;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(axios.get('http://localhost:5000/api/profile/me'));case 3:res=_context2.sent;console.log(res.data);dispatch({type:GET_PROFILE,data:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch({type:PROFILE_ERROR,data:{msg:_context2.t0,status:_context2.t0}});case 11:case\"end\":return _context2.stop();}}},null,null,[[0,8]]);};};// get all the profiles\nexport var getProfiles=function getProfiles(){return function _callee3(dispatch){var res;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:CLEAR_PROFILE});_context3.prev=1;_context3.next=4;return _regeneratorRuntime.awrap(axios.get('http://localhost:5000/api/profile'));case 4:res=_context3.sent;dispatch({type:GET_PROFILES,data:res.data});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](1);dispatch({type:PROFILE_ERROR,data:{msg:_context3.t0.response.statusText,status:_context3.t0.response.status}});case 11:case\"end\":return _context3.stop();}}},null,null,[[1,8]]);};};// get profile by id\nexport var getProfileById=function getProfileById(userId){return function _callee4(dispatch){var res;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _regeneratorRuntime.awrap(axios.get(\"http://localhost:5000/api/profile/user/\".concat(userId)));case 3:res=_context4.sent;dispatch({type:GET_PROFILE,data:res.data});_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);dispatch({type:PROFILE_ERROR,data:{msg:_context4.t0,status:_context4.t0}});case 10:case\"end\":return _context4.stop();}}},null,null,[[0,7]]);};};//create or updite profile picture\nexport var createPictureProfile=function createPictureProfile(image,history){return function _callee5(dispatch){var config,data,res,errors;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(image){_context5.next=4;break;}dispatch(setAlert('You should upload a photo, or click \"skip\"','danger'));_context5.next=20;break;case 4:_context5.prev=4;config={headers:{'Content-Type':'application/json'}};data={profileImage:image};_context5.next=9;return _regeneratorRuntime.awrap(axios.post('http://localhost:5000/api/profile/profilePicture',data,config));case 9:res=_context5.sent;dispatch({type:GET_PROFILE,data:res.data});dispatch(setAlert('Profile Picture is set','success'));history.push('/dashboard');_context5.next=20;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](4);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:PROFILE_ERROR,data:{msg:_context5.t0.response.statusText,status:_context5.t0.response.status}});case 20:case\"end\":return _context5.stop();}}},null,null,[[4,15]]);};};// Delete account & profile\nexport var deleteAccount=function deleteAccount(){return function _callee6(dispatch){return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!window.confirm('Are you sure? This can NOT be undone!')){_context6.next=12;break;}_context6.prev=1;_context6.next=4;return _regeneratorRuntime.awrap(axios.delete('/api/profile/me'));case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:ACCOUNT_DELETED});dispatch(setAlert('Your account has been permanantly deleted'));_context6.next=12;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:_context6.t0.response.statusText,status:_context6.t0.response.status}});case 12:case\"end\":return _context6.stop();}}},null,null,[[1,9]]);};};","map":{"version":3,"sources":["C:/Users/shahar/Desktop/webS/MyProjacts/ChatPet/client-side/src/actions/profileActs.js"],"names":["axios","setAlert","CLEAR_PROFILE","GET_PROFILE","GET_PROFILES","PROFILE_ERROR","ACCOUNT_DELETED","createProfile","FormData","history","edit","dispatch","config","headers","post","res","type","data","push","errors","response","forEach","error","msg","statusText","status","getUserProfile","get","console","log","getProfiles","getProfileById","userId","createPictureProfile","image","profileImage","deleteAccount","window","confirm","delete","payload"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport {setAlert} from './alertAct'\r\n\r\nimport{\r\n    CLEAR_PROFILE,\r\n    GET_PROFILE,\r\n    GET_PROFILES,\r\n    PROFILE_ERROR,\r\n    ACCOUNT_DELETED\r\n  } from './consts'\r\n\r\n\r\n\r\n//create or updite profile\r\nexport const createProfile = (FormData, history, edit = false) => async dispatch => {\r\n  try {\r\n      const config = {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }\r\n\r\n      const res = await axios.post('http://localhost:5000/api/profile/me', FormData, config)\r\n\r\n      dispatch({\r\n          type: GET_PROFILE,\r\n          data: res.data\r\n      })\r\n\r\n      dispatch(setAlert(edit ? 'Profile Updated' : 'Profile Created', 'success'))\r\n      if(!edit){\r\n          history.push('/profiles/profilePicture')\r\n      } \r\n\r\n      history.push('/dashboard')\r\n      \r\n  } catch (err) {\r\n      const errors = err.response.data.errors;\r\n\r\n      if (errors) {\r\n        errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n      }\r\n\r\n      dispatch({\r\n          type: PROFILE_ERROR,\r\n          data: {\r\n              msg: err.response.statusText,\r\n              status: err.response.status\r\n      }\r\n  })\r\n  }\r\n}\r\n\r\n\r\n//get user profile\r\nexport const getUserProfile = () => async dispatch => {\r\ntry{\r\n  const res = await axios.get('http://localhost:5000/api/profile/me')\r\n  console.log(res.data)\r\n    dispatch({\r\n        type: GET_PROFILE,\r\n        data: res.data\r\n    })\r\n} catch (err){\r\n    dispatch({\r\n        type: PROFILE_ERROR,\r\n        data: {\r\n            msg: err,\r\n            status: err\r\n    }\r\n    })\r\n\r\n}\r\n}\r\n\r\n\r\n// get all the profiles\r\nexport const getProfiles = () => async dispatch => {\r\n      dispatch({type: CLEAR_PROFILE})\r\n      try{\r\n        const res = await axios.get('http://localhost:5000/api/profile')\r\n      \r\n          dispatch({\r\n              type: GET_PROFILES,\r\n              data: res.data\r\n          })\r\n      } catch (err){\r\n          dispatch({\r\n              type: PROFILE_ERROR,\r\n              data: {\r\n                  msg: err.response.statusText,\r\n                  status: err.response.status\r\n          }\r\n          })\r\n        }\r\n}\r\n\r\n\r\n// get profile by id\r\nexport const getProfileById = userId => async dispatch => {\r\n  try{\r\n    const res = await axios.get(`http://localhost:5000/api/profile/user/${userId}`)\r\n  \r\n      dispatch({\r\n          type: GET_PROFILE,\r\n          data: res.data\r\n      })\r\n  } catch (err){\r\n      dispatch({\r\n          type: PROFILE_ERROR,\r\n          data: {\r\n              msg: err,\r\n              status: err\r\n      }\r\n      })\r\n    }\r\n}\r\n\r\n\r\n//create or updite profile picture\r\nexport const createPictureProfile = (image, history) => async dispatch => {\r\n    if(!image){\r\n        dispatch(setAlert('You should upload a photo, or click \"skip\"', 'danger'))\r\n    }\r\n    else{\r\n    try {\r\n        const config = {\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            }\r\n          }\r\n\r\n        const data = {\r\n            profileImage: image\r\n        }\r\n        const res = await axios.post(\r\n            'http://localhost:5000/api/profile/profilePicture', data, config)\r\n\r\n\r\n            dispatch({\r\n                type: GET_PROFILE,\r\n                data: res.data\r\n            })\r\n\r\n        dispatch(setAlert('Profile Picture is set', 'success'))\r\n\r\n        history.push('/dashboard')\r\n  } catch (err) {\r\n        const errors = err.response.data.errors;\r\n  \r\n        if (errors) {\r\n          errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            data: {\r\n                msg: err.response.statusText,\r\n                status: err.response.status\r\n        }\r\n        })\r\n    }\r\n}}\r\n\r\n\r\n// Delete account & profile\r\nexport const deleteAccount = () => async dispatch => {\r\n    if (window.confirm('Are you sure? This can NOT be undone!')) {\r\n      try {\r\n        await axios.delete('/api/profile/me')\r\n  \r\n        dispatch({ type: CLEAR_PROFILE })\r\n        dispatch({ type: ACCOUNT_DELETED })\r\n  \r\n        dispatch(setAlert('Your account has been permanantly deleted'))\r\n      } catch (err) {\r\n        dispatch({\r\n          type: PROFILE_ERROR,\r\n          payload: { msg: err.response.statusText, status: err.response.status }\r\n        })\r\n      }\r\n    }\r\n    //תזכור להוסיף פקודה שמוחקת את כל החיות של המשתמש\r\n}"]},"metadata":{},"sourceType":"module"}