{"ast":null,"code":"import axios from 'axios';\nimport { setAlert } from './alertAct';\nimport { GET_PET, GET_PETS, PET_PHOTOS, DELETE_PET, PET_ERROR } from './consts'; //create or updite pet profile\n\nexport const createPet = (petFormData, history, edit = false) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const res = await axios.post('/api/pets', petFormData, config);\n    dispatch({\n      type: GET_PET,\n      data: res.data\n    });\n    dispatch(setAlert(edit ? 'Pet Profile Updated' : 'Pet Profile Created', 'success'));\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\n    }\n\n    dispatch({\n      type: PET_ERROR,\n      data: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; //add photos to pet\n\nexport const addPetImages = (image, id) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const data = {\n    image: image,\n    petId: id\n  };\n  console.log(data);\n\n  try {\n    await axios.post('/api/pets/photos', data, config);\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      errors.forEach(error => setAlert(error.msg, 'danger'));\n    }\n\n    dispatch({\n      type: PET_ERROR,\n      data: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; //get user pet profile\n\nexport const getPetById = petId => async dispatch => {\n  try {\n    const res = await axios.get(`/api/pets/${petId}`);\n    dispatch({\n      type: GET_PET,\n      data: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PET_ERROR,\n      data: {\n        msg: err,\n        status: err\n      }\n    });\n  }\n}; //  get pet photos by petId\n\nexport const getPetPhotos = petId => async dispatch => {\n  try {\n    const res = await axios.get(`/api/pets/${petId}/photos`);\n    console.log(res.data);\n    dispatch({\n      type: PET_PHOTOS,\n      data: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PET_ERROR,\n      data: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // get all the user pets\n\nexport const getUserPets = () => async dispatch => {\n  try {\n    const res = await axios.get('/api/pets');\n    dispatch({\n      type: GET_PETS,\n      data: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PET_ERROR,\n      data: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; //delete pet\n\nexport const deletePet = petId => async dispatch => {\n  try {\n    await axios.delete(`/api/pets/${petId}`);\n    dispatch({\n      type: DELETE_POST,\n      data: postId\n    });\n    dispatch(setAlert('Post Removed', 'success'));\n  } catch (err) {\n    dispatch({\n      type: POST_ERROR,\n      data: {\n        msg: err,\n        status: err\n      }\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/shahar/Desktop/webS/MyProjacts/ChatPet/client-side/src/actions/petActs.js"],"names":["axios","setAlert","GET_PET","GET_PETS","PET_PHOTOS","DELETE_PET","PET_ERROR","createPet","petFormData","history","edit","dispatch","config","headers","res","post","type","data","push","err","errors","response","forEach","error","msg","statusText","status","addPetImages","image","id","petId","console","log","getPetById","get","getPetPhotos","getUserPets","deletePet","delete","DELETE_POST","postId","POST_ERROR"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport {setAlert} from './alertAct'\r\nimport{\r\n    GET_PET,\r\n    GET_PETS,\r\n    PET_PHOTOS,\r\n    DELETE_PET,\r\n    PET_ERROR\r\n  } from './consts'\r\n\r\n\r\n//create or updite pet profile\r\nexport const createPet = (petFormData, history, edit = false) => async dispatch => {\r\n    try {\r\n        const config = {\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            }\r\n          }\r\n\r\n        const res = await axios.post('/api/pets', petFormData, config)\r\n\r\n         dispatch({\r\n            type: GET_PET,\r\n            data: res.data\r\n        })\r\n\r\n        dispatch(setAlert(edit ? 'Pet Profile Updated' : 'Pet Profile Created', 'success'))\r\n\r\n        history.push('/dashboard')\r\n        \r\n    } catch (err) {\r\n        const errors = err.response.data.errors;\r\n  \r\n        if (errors) {\r\n          errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n        }\r\n\r\n        dispatch({\r\n            type: PET_ERROR,\r\n            data: {\r\n                msg: err.response.statusText,\r\n                status: err.response.status\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\n\r\n//add photos to pet\r\nexport const addPetImages = (image, id)  => async dispatch =>{\r\n\r\n    const config = {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }\r\n    const data ={\r\n        image: image,\r\n        petId: id\r\n        }\r\n    console.log(data)\r\n\r\n    try {\r\n        await axios.post('/api/pets/photos', data, config)\r\n      } catch (err) {\r\n        const errors = err.response.data.errors;\r\n  \r\n        if (errors) {\r\n          errors.forEach(error => setAlert(error.msg, 'danger'))\r\n        }\r\n        dispatch({\r\n            type: PET_ERROR,\r\n            data: {\r\n                msg: err.response.statusText,\r\n                status: err.response.status\r\n            }\r\n        })\r\n      }\r\n}\r\n//get user pet profile\r\nexport const getPetById = petId => async dispatch => {\r\n  try{\r\n    const res = await axios.get(`/api/pets/${petId}`)\r\n  \r\n      dispatch({\r\n          type: GET_PET,\r\n          data: res.data\r\n      })\r\n  } catch (err){\r\n      dispatch({\r\n          type: PET_ERROR,\r\n          data: {\r\n              msg: err,\r\n              status: err\r\n      }\r\n      })\r\n  }}\r\n\r\n\r\n  \r\n//  get pet photos by petId\r\nexport const getPetPhotos = petId => async dispatch => {\r\n  try{\r\n    const res = await axios.get(`/api/pets/${petId}/photos`)\r\n      console.log(res.data)\r\n      dispatch({\r\n          type: PET_PHOTOS,\r\n          data: res.data\r\n      })\r\n  } catch (err){\r\n      dispatch({\r\n          type: PET_ERROR,\r\n          data: {\r\n              msg: err.response.statusText,\r\n              status: err.response.status\r\n      }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n// get all the user pets\r\n    export const getUserPets = () => async dispatch => {\r\n      try{\r\n        const res = await axios.get('/api/pets')\r\n      \r\n          dispatch({\r\n              type: GET_PETS,\r\n              data: res.data\r\n          })\r\n      } catch (err){\r\n          dispatch({\r\n              type: PET_ERROR,\r\n              data: {\r\n                  msg: err.response.statusText,\r\n                  status: err.response.status\r\n          }\r\n          })\r\n        }\r\n      }\r\n\r\n\r\n//delete pet\r\nexport const deletePet = petId => async dispatch =>{\r\n  try {\r\n      await axios.delete(`/api/pets/${petId}`)\r\n\r\n      dispatch({\r\n          type: DELETE_POST,\r\n          data: postId\r\n      })\r\n\r\n      dispatch(setAlert('Post Removed', 'success'))\r\n  } catch (err) {\r\n      dispatch({\r\n          type: POST_ERROR,\r\n          data: { \r\n              msg: err,\r\n              status: err\r\n          }\r\n      })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}